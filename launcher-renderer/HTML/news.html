<link rel="stylesheet" href="../Css/panels/news.css">
<link rel="prerender" href="../Static/Img/Banner/8.webp">
<link rel="prerender" href="../Static/Img/Banner/12.webp">
<link rel="prerender" href="../Static/Img/Banner/4.webp">
<link rel="prerender" href="../Static/Img/Background/1.jpg">
<link rel="prerender" href="../Static/Resources/icon.png">
<div>
    <div class="HiddenButton" id="HiddenButton">
        <img id="HiddenButtonIcon" src="../Static/Resources/Svg/eye.svg">
        <label id="HiddenButtonLabel">Ocultar Noticias</label>
    </div>
    <div class="News-Container-Root">
        <div class="NewsCardsContainer" id="News-Container"></div>
        <div class="ChangelogContainer Unvisible">
            <div id="Changelog-Container"></div>
        </div>
    </div>
    <div class="News-Panel-Container Unvisible">
        <div data-filter="all" class="Panel-Item">
            <div class="ImageContainer">
                <img src="../Static/Img/Banner/8.webp" loading="lazy">
            </div>
            <p data-lang="filter_all"></p>
        </div>
        
        <div data-filter="release" class="Panel-Item">
            <div class="ImageContainer">
                <img src="../Static/Img/Banner/12.webp" loading="lazy">
            </div>
            <p data-lang="filter_release"></p>
        </div>
        
        <div data-filter="snapshot" class="Panel-Item">
            <div class="ImageContainer">
                <img src="../Static/Img/Banner/4.webp" loading="lazy">
            </div>
            <p data-lang="filter_snapshots"></p>
        </div>

        <div data-filter="steplauncher" class="Panel-Item">
            <div class="ImageContainer">
                <img src="../Static/Img/Background/3.webp" loading="lazy">
                <img src="../Static/Resources/icon.png" class="Step">
            </div>
            <p data-lang="filter_steplauncher"></p>
        </div>
        
        <div class="News-Panel-Button-Exit" id="News-Panel-Button-Exit"><img src="../Static/Resources/Svg/close.svg"></div>
    </div>
    <div class="News-Hotbar" id="News-Hotbar">
        <div class="Hotbar-Button" id="SelectNews"><label>Releases</label></div>
        <div class="Hotbar-Button" id="LoadMore"><label>Cargar Mas</label></div>
        <div class="Hotbar-Button" id="Reload"><label>Recargar</label></div>
    </div>
    <script type="module" src="../../dist/Renderer/News/Main.js"></script>
    <script defer>
        document.addEventListener("DOMContentLoaded", () => {
            const btn = document.getElementById("HiddenButton"),
                container = document.querySelector(".News-Container-Root"),
                icon = document.getElementById("HiddenButtonIcon"),
                label = document.getElementById("HiddenButtonLabel"),
                panelItems = document.querySelectorAll('.Panel-Item'),
                panelContainer = document.querySelector('.News-Panel-Container'),
                selectNews = document.getElementById('SelectNews'),
                exitButtonPanel = document.getElementById('News-Panel-Button-Exit'),
                hotbar = document.getElementById('News-Hotbar');
                selectNewsLabel = selectNews.querySelector('label');

            container.classList.add("Visible");

            function typeWriter(text, element, speed = 50) {
                element.textContent = '';
                let i = 0;
                function type() {
                    if (i < text.length) {
                        element.textContent += text.charAt(i);
                        i++;
                        setTimeout(type, speed);
                    }
                }
                type();
            }
            panelItems.forEach(item => {
                item.addEventListener('click', function() {
                    const pElement = this.querySelector('p');
                    const texto = pElement.textContent || pElement.innerText;
                    
                    if (selectNewsLabel) {
                        typeWriter(texto, selectNewsLabel, 30);
                    } else {
                        typeWriter(texto, selectNews, 30);
                    }
             
                    if (container) {
                        container.classList.remove('Unvisible');
                        hotbar.classList.remove('Unvisible');
                        btn.classList.remove('Unvisible');
                        panelContainer.classList.add('Unvisible');
                    }
                });
            });
            exitButtonPanel.addEventListener('click', function() {
                container.classList.remove('Unvisible');
                hotbar.classList.remove('Unvisible');
                btn.classList.remove('Unvisible');
                panelContainer.classList.add('Unvisible');
            });
            selectNews.addEventListener('click', function() {
                if (container) {
                    container.classList.add('Unvisible');
                    hotbar.classList.add('Unvisible');
                    btn.classList.add('Unvisible');
                    panelContainer.classList.remove('Unvisible');
                }
            });
            
            btn.addEventListener("click", () => {
                const isHidden = container.classList.contains("Unvisible");

                if (isHidden) {
                    container.classList.remove("Unvisible");
                    container.classList.add("Visible");

                    icon.src = "../Static/Resources/Svg/eye.svg";
                    label.textContent = "Ocultar Noticias";
                } else {
                    container.classList.remove("Visible");
                    container.classList.add("Unvisible");

                    icon.src = "../Static/Resources/Svg/eye-closed.svg";
                    label.textContent = "Mostrar Noticias";
                }
            });
        });
    </script>
</div>